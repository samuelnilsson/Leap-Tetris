<!DOCTYPE html>
<html>
<head>
	<title>JavaScript Swipe</title>
	<style>
		body {
			background: white;
			font: 15px 'Helvetica', sans-serif;
		}
	</style>
</head>
<body>
	<h1>Leap Motion: Piano</h1>
	<img src="imgs/piano.jpg">
	<script src="node_modules/leapjs/leap-0.6.4.js"></script>
	<script>
		var output = document.getElementById("output");
		var controller = Leap.loop({ enableGestures: true }, function(frame) {});

		var tones = [
			'audio/piano_middle_C.mp3',
			'audio/piano_D.mp3',
			'audio/piano_E.mp3',
			'audio/piano_F.mp3',
			'audio/piano_G.mp3',
			'audio/piano_A.mp3',
			'audio/piano_B.mp3'
		];

		controller.on('gesture', function(gesture) {
			if(gesture.type == 'screenTap' || gesture.type == 'keyTap') {
				var position = gesture.position[0],
					pianoWidth = 400,
					toneWidth = pianoWidth / tones.length,
					toneIndex;

				if(Math.abs(position) > 200) {
					console.log('Out of bounds!', position);
					return;
				}
				else
					position += 200;

				for(var i = 1; i <= tones.length; i++) {
					if(position <= toneWidth * i) {
						toneIndex = i;
						console.log('Tone index set to', toneIndex);
						break;
					}
				}

				(new Audio(tones[toneIndex-1])).play();
			}
		});
	</script>
</body>
</html>